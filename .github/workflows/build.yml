on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v5
      - name: Install Prerequisites
        run: ./build/vsts-prerequisites.ps1
        shell: powershell
      - name: Validate
        run: ./build/vsts-validate.ps1
        shell: powershell
      - name: Build
        run: ./build/vsts-build.ps1 -ApiKey $env:APIKEY -AutoVersion -SkipPublish
        shell: powershell
        env:
          APIKEY: ${{ secrets.ApiKey }}
